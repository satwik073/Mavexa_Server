{"version":3,"file":"workflowsControllersGenerated.js","sourceRoot":"/","sources":["Controllers/WorkflowControllers/workflowsControllersGenerated.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,2BAA2B;AAC3B,sDAA8E;AAC9E,qFAAyI;AACzI,0EAAkD;AAgBrC,QAAA,oBAAoB,GAAG,IAAA,sDAAgC,EAAC,CAAO,OAA8D,EAAE,QAAkB,EAAE,EAAE;;IAC9J,IAAI,CAAC;QACD,MAAM,EAAE,WAAW,EAAE,iBAAiB,EAAE,cAAc,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC;QAC9G,MAAM,aAAa,GAAG,IAAA,8CAAwB,EAAC;YAC3C,WAAW,EAAE,iBAAiB;SACjC,EAAE,QAAQ,EAAE,4BAAgB,CAAC,UAAU,CAAC,CAAC;QAE1C,IAAI,aAAa;YAAE,OAAO,aAAa,CAAC;QACxC,MAAM,WAAW,GAAG,MAAM,IAAA,oCAAc,EAAC;YACrC,WAAW;YACX,cAAc,EAAE,CAAA,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,0CAAE,EAAE,KAAI,cAAc;YACnD,iBAAiB;YACjB,iBAAiB;YACjB,iBAAiB;SACpB,EAAE,8BAAkB,CAAC,WAAW,CAAC,CAAC;QACnC,IAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,OAAO,EAAE,CAAC;YACvB,OAAO,QAAQ,CAAC,MAAM,CAAC,2BAAiB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;gBACnD,OAAO,EAAE,oCAAoC;gBAC7C,YAAY,EAAE,WAAW,CAAC,YAAY;aACzC,CAAC,CAAC;QACP,CAAC;aAAM,CAAC;YACJ,OAAO,QAAQ,CAAC,MAAM,CAAC,2BAAiB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;gBACvD,OAAO,EAAE,WAAW,CAAC,OAAO,IAAI,gCAAgC;aACnE,CAAC,CAAC;QACP,CAAC;IAEL,CAAC;IAAC,OAAO,KAAW,EAAE,CAAC;QACnB,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;QACvD,OAAO,QAAQ,CAAC,MAAM,CAAC,2BAAiB,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC;YACjE,OAAO,EAAE,qCAAqC;YAC9C,KAAK,EAAE,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,KAAI,KAAK;SACjC,CAAC,CAAC;IACP,CAAC;AACL,CAAC,CAAA,CAAC,CAAC;AAGU,QAAA,yBAAyB,GAAG,IAAA,sDAAgC,EAAC,CAAM,OAA8B,EAAG,QAAmB,EAAE,EAAE;;IACpI,IAAI,CAAC;QACD,MAAM,OAAO,GAAG,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,0CAAE,EAAE,CAAC;QAClC,OAAO,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,MAAM,CAAC,2BAAiB,CAAC,EAAE,EAAE,IAAI,CAAC;YAC/C,OAAO,EAAE,mCAAmC;YAC5C,MAAM,EAAG,OAAO;SACnB,CAAC,CAAA;IACN,CAAC;YACL,CAAC;IAAD,CAAC,AADI;AACL,CAAC,CAAA,CAAC,CAAA","sourcesContent":["// Import necessary modules\r\nimport { AuthTypeDeclared, SchemaCreationType } from \"../../Common/structure\";\r\nimport { ASYNC_ERROR_HANDLER_ESTAIBLISHED, DATA_PROCESSOR, MISSING_FIELDS_VALIDATOR } from \"../../Middlewares/Error/ErrorHandlerReducer\";\r\nimport HTTPS_STATUS_CODE from \"http-status-codes\";\r\nimport { Request, Response } from \"express\";\r\nimport mongoose, { Schema } from \"mongoose\";\r\n\r\ninterface WorkflowSchema {\r\n    displayName: string;\r\n    accountOwnerId: mongoose.Schema.Types.ObjectId;\r\n    descriptionConfig: string;\r\n    isWorkflowEnabled: boolean;\r\n    isWorkflowAllowed: boolean;\r\n}\r\n\r\ninterface AuthenticatedRequest extends Request {\r\n    user?: any;  \r\n}\r\n\r\nexport const creatingVirtualFLows = ASYNC_ERROR_HANDLER_ESTAIBLISHED(async (request: Request<{}, {}, WorkflowSchema, AuthenticatedRequest>, response: Response) => {\r\n    try {\r\n        const { displayName, descriptionConfig, accountOwnerId, isWorkflowAllowed, isWorkflowEnabled } = request.body;\r\n        const missingFields = MISSING_FIELDS_VALIDATOR({\r\n            displayName, descriptionConfig\r\n        }, response, AuthTypeDeclared.USER_LOGIN);\r\n\r\n        if (missingFields) return missingFields;\r\n        const trackedData = await DATA_PROCESSOR({\r\n            displayName,\r\n            accountOwnerId: request?.user?.id || accountOwnerId,  \r\n            descriptionConfig,\r\n            isWorkflowAllowed,\r\n            isWorkflowEnabled\r\n        }, SchemaCreationType.__WORKFLOWS);\r\n        if (trackedData?.success) {\r\n            return response.status(HTTPS_STATUS_CODE.CREATED).json({\r\n                message: \"Virtual Flows created successfully\",\r\n                workflowData: trackedData.workflowData\r\n            });\r\n        } else {\r\n            return response.status(HTTPS_STATUS_CODE.BAD_REQUEST).json({\r\n                message: trackedData.message || \"Failed to create virtual flows\"\r\n            });\r\n        }\r\n\r\n    } catch (error : any) {\r\n        console.error(\"Error in creatingVirtualFLows:\", error);\r\n        return response.status(HTTPS_STATUS_CODE.INTERNAL_SERVER_ERROR).json({\r\n            message: \"Virtual Flows creation unsuccessful\",\r\n            error: error?.message || error\r\n        });\r\n    }\r\n});\r\n\r\n\r\nexport const retrieveExistingUserFlows = ASYNC_ERROR_HANDLER_ESTAIBLISHED(async(request : AuthenticatedRequest , response : Response) => {\r\n    try {\r\n        const _userID = request?.user?.id;\r\n        return response?.status(HTTPS_STATUS_CODE.OK).json({\r\n            message: \"User Flows retrieved successfully\",\r\n            userID : _userID\r\n        })\r\n    }\r\n})"]}