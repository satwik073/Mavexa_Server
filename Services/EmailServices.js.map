{"version":3,"file":"EmailServices.js","sourceRoot":"/","sources":["Services/EmailServices.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kDAA0B;AAC1B,8DAA8C;AAC9C,oDAA4B;AAC5B,qEAA6E;AAC7E,iEAAwG;AACxG,2EAAwE;AACxE,8EAA6E;AAE7E,gBAAM,CAAC,MAAM,EAAE,CAAC;AAIhB,MAAM,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC;KAClC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AAEtE,MAAM,qBAAqB,GAAG,CAAO,0BAA8C,EAAE,EAAE;IAE1F,MAAM,QAAQ,GAAG;QACb,OAAO,EAAE,0BAA0B,CAAC,kBAAkB;QACtD,eAAe,EAAE,0BAA0B,CAAC,eAAe;QAC3D,eAAe,EAAE,0BAA0B,CAAC,aAAa;QACzD,IAAI,EAAE,0BAA0B,CAAC,kBAAkB;QACnD,MAAM,EAAE,0BAA0B,CAAC,oBAAoB;KAC1D,CAAA;IACD,IAAI,CAAC;QACD,MAAM,uBAAuB,GAAG,gBAAc,CAAC,oBAAoB,CAC/D,8BAAC,kCAAqB,IAAC,kBAAkB,EAAE,QAAQ,CAAC,OAAO,EAAE,kBAAkB,EAAE,QAAQ,CAAC,IAAI,EAAE,oBAAoB,EAAE,QAAQ,CAAC,MAAM,GACnI,CACL,CAAC;QACF,MAAM,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC;YAClE,QAAQ,EAAE,CAAC;oBACH,IAAI,EAAE,EAAC,KAAK,EAAE,QAAQ,CAAC,eAAe,EAAE,IAAI,EAAE,QAAQ,CAAC,IAAI,EAAC;oBAC5D,EAAE,EAAE,CAAC,EAAC,KAAK,EAAE,QAAQ,CAAC,eAAe,EAAC,IAAI,EAAE,QAAQ,CAAC,OAAO,EAAC,CAAC;oBAC9D,OAAO,EAAE,GAAG,QAAQ,CAAC,IAAI,EAAE;oBAC3B,QAAQ,EAAE,GAAG,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,MAAM,GAAG,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,EAAE;oBAClF,QAAQ,EAAE,uBAAuB;iBACpC;aACJ;SACJ,CAAC,CAAC;QACP,MAAM,eAAe,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,IAAA,uCAAmB,EAAC,mBAAc,CAAC,SAAS,CAAC,EAAG,QAAQ,CAAC,eAAe,CAAC,CAAC;IAC1F,CAAC;IAAC,OAAO,eAAe,EAAE,CAAC;QACvB,OAAO,CAAC,KAAK,CAAC,IAAI,yCAA6B,CAAC,mCAAgB,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7E,CAAC;AACL,CAAC,CAAA,CAAC;AA7BW,QAAA,qBAAqB,yBA6BhC","sourcesContent":["import React from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport dotenv from 'dotenv';\r\nimport { EMAIL_CONFIG_TEMPLATE } from '../Config/Email/Constants/use_styles';\r\nimport RolesSpecified, { EmailResponseControllingError, SendingEmailToUser } from '../Common/structure';\r\nimport { DEFAULT_EXECUTED } from '../Constants/Errors/PreDefinedErrors';\r\nimport { EMAIL_SESSION_RELAY } from '../Constants/Success/PreDefinedSuccess';\r\n\r\ndotenv.config();\r\n\r\n\r\n\r\nconst mailjet = require('node-mailjet')\r\n    .apiConnect(process.env.MJ_APIKEY_PUBLIC, process.env.MJ_APIKEY_PRIVATE);\r\n\r\nexport const email_service_enabled = async (email_sending_data_wrapped: SendingEmailToUser) => {\r\n\r\n    const Modifier = {\r\n        RC_USER: email_sending_data_wrapped.receivers_username,\r\n        RC_EMAIL_CONFIG: email_sending_data_wrapped.receivers_email,\r\n        SD_EMAIL_CONFIG: email_sending_data_wrapped.senders_email,\r\n        PD_C: email_sending_data_wrapped.product_by_company,\r\n        VR_OTP: email_sending_data_wrapped.otp_for_verification,\r\n    }\r\n    try {\r\n        const mail_generating_content = ReactDOMServer.renderToStaticMarkup(\r\n            <EMAIL_CONFIG_TEMPLATE receivers_username={Modifier.RC_USER} product_by_company={Modifier.PD_C} otp_for_verification={Modifier.VR_OTP}\r\n            />\r\n        );\r\n        const request_granted = mailjet.post('send', { version: 'v3.1' }).request({\r\n                Messages: [{\r\n                        From: {Email: Modifier.SD_EMAIL_CONFIG ,Name: Modifier.PD_C},\r\n                        To: [{Email: Modifier.RC_EMAIL_CONFIG,Name: Modifier.RC_USER}],\r\n                        Subject: `${Modifier.PD_C}`,\r\n                        TextPart: `${Modifier.RC_USER} ${Modifier.VR_OTP}${Modifier.PD_C}${Modifier.PD_C}`,\r\n                        HTMLPart: mail_generating_content ,\r\n                    }\r\n                ]\r\n            });\r\n        await request_granted;\r\n        console.log(EMAIL_SESSION_RELAY(RolesSpecified.USER_DESC) , Modifier.RC_EMAIL_CONFIG);\r\n    } catch (error_displayed) {\r\n        console.error(new EmailResponseControllingError(DEFAULT_EXECUTED.ERROR)); \r\n    }\r\n};\r\n"]}