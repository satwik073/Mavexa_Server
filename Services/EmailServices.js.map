{"version":3,"file":"EmailServices.js","sourceRoot":"/","sources":["Services/EmailServices.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,kDAA0B;AAC1B,8DAA8C;AAC9C,kFAA0D;AAC1D,oDAA4B;AAE5B,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,MAAM,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC;KAClC,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AAUtE,MAAM,qBAAqB,GAAG,CAAO,0BAA8C,EAAE,EAAE;IAC1F,IAAI,CAAC;QACD,MAAM,WAAW,GAAG,gBAAc,CAAC,oBAAoB,CACnD,8BAAC,uBAAa,IACV,kBAAkB,EAAE,0BAA0B,CAAC,kBAAkB,EACjE,kBAAkB,EAAE,0BAA0B,CAAC,kBAAkB,EACjE,oBAAoB,EAAE,0BAA0B,CAAC,oBAAoB,GACvE,CACL,CAAC;QAEF,MAAM,OAAO,GAAG,OAAO;aAClB,IAAI,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;aACjC,OAAO,CAAC;YACL,QAAQ,EAAE;gBACN;oBACI,IAAI,EAAE;wBACF,KAAK,EAAE,0BAA0B,CAAC,aAAa;wBAC/C,IAAI,EAAE,0BAA0B,CAAC,kBAAkB;qBACtD;oBACD,EAAE,EAAE;wBACA;4BACI,KAAK,EAAE,0BAA0B,CAAC,eAAe;4BACjD,IAAI,EAAE,0BAA0B,CAAC,kBAAkB;yBACtD;qBACJ;oBACD,OAAO,EAAE,qBAAqB,0BAA0B,CAAC,kBAAkB,EAAE;oBAC7E,QAAQ,EAAE,SAAS,0BAA0B,CAAC,kBAAkB,+BAA+B,0BAA0B,CAAC,oBAAoB,6FAA6F,0BAA0B,CAAC,kBAAkB,2BAA2B,0BAA0B,CAAC,kBAAkB,OAAO;oBACvW,QAAQ,EAAE,WAAW;iBACxB;aACJ;SACJ,CAAC,CAAC;QACP,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC;QAC7B,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;IACzD,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACb,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QACrD,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;AACL,CAAC,CAAA,CAAC;AArCW,QAAA,qBAAqB,yBAqChC","sourcesContent":["import React from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport EmailTemplate from '../Config/Email/EmailTemplate';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nconst mailjet = require('node-mailjet')\r\n    .apiConnect(process.env.MJ_APIKEY_PUBLIC, process.env.MJ_APIKEY_PRIVATE);\r\n\r\ninterface SendingEmailToUser {\r\n    senders_email: string;\r\n    receivers_email: string;\r\n    otp_for_verification: string;\r\n    product_by_company: string;\r\n    receivers_username: string;\r\n}\r\n\r\nexport const email_service_enabled = async (email_sending_data_wrapped: SendingEmailToUser) => {\r\n    try {\r\n        const htmlContent = ReactDOMServer.renderToStaticMarkup(\r\n            <EmailTemplate\r\n                receivers_username={email_sending_data_wrapped.receivers_username}\r\n                product_by_company={email_sending_data_wrapped.product_by_company}\r\n                otp_for_verification={email_sending_data_wrapped.otp_for_verification}\r\n            />\r\n        );\r\n\r\n        const request = mailjet\r\n            .post('send', { version: 'v3.1' }) \r\n            .request({\r\n                Messages: [\r\n                    {\r\n                        From: {\r\n                            Email: email_sending_data_wrapped.senders_email,\r\n                            Name: email_sending_data_wrapped.product_by_company\r\n                        },\r\n                        To: [\r\n                            {\r\n                                Email: email_sending_data_wrapped.receivers_email,\r\n                                Name: email_sending_data_wrapped.receivers_username\r\n                            }\r\n                        ],\r\n                        Subject: `Your OTP Code for ${email_sending_data_wrapped.product_by_company}`,\r\n                        TextPart: `Hello ${email_sending_data_wrapped.receivers_username},\\n\\nHere is your OTP Code: ${email_sending_data_wrapped.otp_for_verification}\\n\\nIf you did not request this code, please ignore this email.\\n\\nThank you for choosing ${email_sending_data_wrapped.product_by_company}!\\n\\nBest regards,\\nThe ${email_sending_data_wrapped.product_by_company} Team`,\r\n                        HTMLPart: htmlContent\r\n                    }\r\n                ]\r\n            });\r\n        const result = await request;\r\n        console.log('Email sent successfully:', result.body);\r\n    } catch (error) {\r\n        console.error(\"Error sending email:\", error.message); \r\n        console.error(error); \r\n    }\r\n};\r\n"]}