{"version":3,"file":"EmailServices.js","sourceRoot":"/","sources":["Services/EmailServices.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACrC,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAA;AAChC,MAAM,CAAC,MAAM,EAAE,CAAA;AASf,MAAM,sBAAsB,GAAG,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC;AACrE,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC1B,OAAO,CAAC,KAAK,CAAC,4CAA4C,CAAC,CAAC;AAChE,CAAC;AACD,MAAM,MAAM,GAAG,sBAAsB,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAE1F,MAAM,qBAAqB,GAAG,CAAO,0BAA8C,EAAE,EAAE;IAC1F,IAAI,CAAC,MAAM,EAAE,CAAC;QACV,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAA;QACnC,OAAO,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;QACjD,OAAO;IACX,CAAC;IAED,IAAI,CAAC;QACD,MAAM,MAAM,CAAC,SAAS,CAAC;YACnB,IAAI,EAAE,0BAA0B,CAAC,aAAa;YAC9C,EAAE,EAAE,0BAA0B,CAAC,eAAe;YAC9C,OAAO,EAAE,qBAAqB,0BAA0B,CAAC,kBAAkB,EAAE;YAC7E,QAAQ,EAAE;;;;;;yFAMmE,0BAA0B,CAAC,kBAAkB;;;;;0GAK5B,0BAA0B,CAAC,kBAAkB;;0IAEb,0BAA0B,CAAC,mBAAmB;;2HAE7D,0BAA0B,CAAC,kBAAkB;;;;;oGAKpE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,IAAI,0BAA0B,CAAC,kBAAkB;;;;;;aAMhK;YACD,QAAQ,EAAE,SAAS,0BAA0B,CAAC,kBAAkB,+BAA+B,0BAA0B,CAAC,mBAAmB,6FAA6F,0BAA0B,CAAC,kBAAkB,2BAA2B,0BAA0B,CAAC,kBAAkB,OAAO;YACtW,aAAa,EAAE,WAAW;SAC7B,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,8BAA8B,0BAA0B,CAAC,eAAe,EAAE,CAAC,CAAC;IAC5F,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACb,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;IACjD,CAAC;AACL,CAAC,CAAA,CAAA;AA9CY,QAAA,qBAAqB,yBA8CjC","sourcesContent":["const postmark = require('postmark');\r\nconst dotenv = require('dotenv')\r\ndotenv.config()\r\ninterface SendingEmailToUser {\r\n    senders_email: string;\r\n    recievers_email: string;\r\n    otp_for_verfication: string;\r\n    product_by_company: string;\r\n    recievers_username: string;\r\n}\r\n\r\nconst server_client_token_id = process.env.SERVER_CLIENT_POSTMARK_ID;\r\nif (!server_client_token_id) {\r\n    console.error(\"Postmark server client token ID is missing\");\r\n}\r\nconst client = server_client_token_id ? new postmark.ServerClient(server_client_token_id) : null;\r\n\r\nexport const email_service_enabled = async (email_sending_data_wrapped: SendingEmailToUser) => {\r\n    if (!client) {\r\n        console.log(server_client_token_id)\r\n        console.error(\"Postmark client not initialized\");\r\n        return;\r\n    }\r\n\r\n    try {\r\n        await client.sendEmail({\r\n            From: email_sending_data_wrapped.senders_email,\r\n            To: email_sending_data_wrapped.recievers_email,\r\n            Subject: `Your OTP Code for ${email_sending_data_wrapped.product_by_company}`,\r\n            HtmlBody: `\r\n                <html>\r\n                    <body style=\"font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #fef4e5;\">\r\n                        <table role=\"presentation\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"max-width: 600px; margin: auto; background: #ffffff; border-radius: 8px; overflow: hidden; border: 1px solid #e0e0e0;\">\r\n                            <tr>\r\n                                <td style=\"padding: 20px; background: #f7c300; color: #ffffff; text-align: center;\">\r\n                                    <h1 style=\"margin: 0; font-size: 24px;\">Welcome to ${email_sending_data_wrapped.product_by_company}!</h1>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td style=\"padding: 20px;\">\r\n                                    <p style=\"font-size: 16px; line-height: 1.5; color: #333333;\">Hello ${email_sending_data_wrapped.recievers_username},</p>\r\n                                    <p style=\"font-size: 16px; line-height: 1.5; color: #333333;\">Here is your One-Time Password (OTP) for verifying your account:</p>\r\n                                    <h2 style=\"color: #f7c300; text-align: center; font-weight: bold; font-size: 32px; margin: 10px 0;\">${email_sending_data_wrapped.otp_for_verfication}</h2>\r\n                                    <p style=\"font-size: 16px; line-height: 1.5; color: #333333;\">If you did not request this code, please ignore this email.</p>\r\n                                    <p style=\"font-size: 16px; line-height: 1.5; color: #333333;\">Thank you for choosing ${email_sending_data_wrapped.product_by_company}!</p>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td style=\"padding: 20px; background: #fef4e5; text-align: center;\">\r\n                                    <p style=\"font-size: 14px; color: #888888; margin: 0;\">&copy; ${new Date().getFullYear()} ${email_sending_data_wrapped.product_by_company}. All rights reserved.</p>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </body>\r\n                </html>\r\n            `,\r\n            TextBody: `Hello ${email_sending_data_wrapped.recievers_username},\\n\\nHere is your OTP Code: ${email_sending_data_wrapped.otp_for_verfication}\\n\\nIf you did not request this code, please ignore this email.\\n\\nThank you for choosing ${email_sending_data_wrapped.product_by_company}!\\n\\nBest regards,\\nThe ${email_sending_data_wrapped.product_by_company} Team`,\r\n            MessageStream: \"broadcast\"\r\n        });\r\n        console.log(`Email sent successfully to ${email_sending_data_wrapped.recievers_email}`);\r\n    } catch (error) {\r\n        console.error(\"Error sending email:\", error);\r\n    }\r\n}\r\n"]}